# 二义性与冲突处理

## Bison

一旦出现规约/规约冲突，Bison总会选择靠前的产生式。

一旦出现移入/规约冲突，Bison总会选择移入。

## Lark（仅限LALR1）

如果出现移入/规约冲突，Lark总会选择移入。（https://lark-parser.readthedocs.io/en/latest/how_to_use.html）

如果出现规约/规约冲突，会尝试比较产生式的优先级，选择优先级高的产生式。如果无法选择，则报错退出。

## 初步解决方案

当出现移进归约冲突时，分析器生成器根据下面的规则解决二义文法：

如果当前的标记的优先级高于栈顶规则的优先级，移进当前标记
如果栈顶规则的优先级更高，进行归约
如果当前的标记与栈顶规则的优先级相同，如果标记是左结合的，则归约，否则，如果是右结合的则移进
如果没有优先级可以参考，默认对于移进归约冲突执行移进

当出现规约规约冲突时，只能随便选择一个了。